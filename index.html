<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yihjian.github.io","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="CS@UIUC23&#x2F;MLer&#x2F;Blogger&#x2F;Wall Street Gambler&#x2F;Procrastinator">
<meta property="og:type" content="website">
<meta property="og:title" content="Jian&#39;s Bullshits">
<meta property="og:url" content="https://yihjian.github.io/index.html">
<meta property="og:site_name" content="Jian&#39;s Bullshits">
<meta property="og:description" content="CS@UIUC23&#x2F;MLer&#x2F;Blogger&#x2F;Wall Street Gambler&#x2F;Procrastinator">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Yihong Jian">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://yihjian.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Jian's Bullshits</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Jian's Bullshits</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-coding">

    <a href="/categories/Coding/" rel="section"><i class=" fa-fw"></i>Coding</a>

  </li>
        <li class="menu-item menu-item-investment">

    <a href="/categories/Investment/" rel="section"><i class=" fa-fw"></i>Investment</a>

  </li>
        <li class="menu-item menu-item-thoughts">

    <a href="/categories/Thoughts/" rel="section"><i class=" fa-fw"></i>Thoughts</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class=" fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class=" fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yihjian.github.io/2020/05/17/An-update-on-this/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Yihong Jian">
      <meta itemprop="description" content="CS@UIUC23/MLer/Blogger/Wall Street Gambler/Procrastinator">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jian's Bullshits">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/17/An-update-on-this/" class="post-title-link" itemprop="url">An Update on Whatever</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-05-17 14:03:26 / Modified: 14:23:38" itemprop="dateCreated datePublished" datetime="2020-05-17T14:03:26-05:00">2020-05-17</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Thoughts/" itemprop="url" rel="index"><span itemprop="name">Thoughts</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/05/17/An-update-on-this/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/05/17/An-update-on-this/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>So finally I got final out of my way, there’re no more reason to procrastinate so I’m just gonna do some quick updates. I just migrated the website theme to the newest and finally enabled commenting function. One last thing to do is the traffic analysis tool. I’ve been reading through papers and found a major bug with my stock model. I’ll do an analysis tomorrow…starting to get dimmer on have this working…</p>
<p>This stay at home period is, well, more problematic than I thought as it makes me much more lazier and losses focus. Got to do something. I’ve got around a month before summer courses begin, it will be diffEq and database system, will be fun.</p>
<p>May 17^th^</p>
<hr>
<p>前段时间<del>偷懒</del>考期末考，就有一段时间没有写代码/更新网站了。我把这个博客的系统更新了一下并且开启了评论功能，接下来应该会加一个流量分析吧。然后股票的那个模型，最近找到了一些bug，翻了翻paper，明天应该会写一个小更新。</p>
<p>唉居家之后真的是越来越懒了。。。这一个月认真做点啥吧，之后又要上夏校了。</p>
<p>五月17号</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yihjian.github.io/2020/05/01/Quant-With-LSTM-ii/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Yihong Jian">
      <meta itemprop="description" content="CS@UIUC23/MLer/Blogger/Wall Street Gambler/Procrastinator">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jian's Bullshits">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/01/Quant-With-LSTM-ii/" class="post-title-link" itemprop="url">Quant-With-LSTM-ii</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-05-01 14:19:41" itemprop="dateCreated datePublished" datetime="2020-05-01T14:19:41-05:00">2020-05-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-05-04 19:52:56" itemprop="dateModified" datetime="2020-05-04T19:52:56-05:00">2020-05-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Coding/" itemprop="url" rel="index"><span itemprop="name">Coding</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/05/01/Quant-With-LSTM-ii/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/05/01/Quant-With-LSTM-ii/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>It has been another <del>lazy</del> busy two weeks before I had some more time to investigate my stock prediction model, and there’re two major progresses that I think I shall log down.</p>
<h4 id="Prediction"><a href="#Prediction" class="headerlink" title="Prediction"></a>Prediction</h4><p>Yesterday night, I figured out the way to predict some ticker price for today. My model predicted that <em>BILI, BAC, INTC, GILD, and CCL</em> will be down in terms of closing price today. It seems that I’m correct so far (approx. 2:30 p.m. cdt). Based on the result of an hour ago, the <em>AMD and BAC</em> will be down on Monday, but that might change depending on price movement, and I’ll do a batch of prediction on Sunday night.</p>
<p>Also, I will try to apply this model to other timeframe as technical analysis works on all timeframes</p>
<h4 id="“Plateau-Issue”"><a href="#“Plateau-Issue”" class="headerlink" title="“Plateau Issue”"></a>“Plateau Issue”</h4><p>In last post, I mentioned that sometimes the model would just give up and I spent some time investigating this issue. I found that the model automatically bounds the ticker price at around $120. To be more clear, the prediction would “stop” once ticker price hits 120 and resume when it drops below. Here’re some examples</p>
<blockquote>
<p><img src="/images/lstm-ii/tsla.png" alt> This is the label (red) vs. prediction (green) for tsla around 2013, clearly the model just stops after hitting 120 price level (y-axis).</p>
</blockquote>
<blockquote>
<p><img src="/images/lstm-ii/msft.png" alt> Similarly Microsoft (around the end of 2018) has the same issue, and it’s training set! So supposingly this problem occurred during training and I could drastically increase accuracy if the problem is solved. Also the plateau is not liked caused by extrapolation since Microsoft was way over 120 for more than a year.</p>
</blockquote>
<blockquote>
<p><img src="/images/lstm-ii/jpm.png" alt> This is the most interesting example–J.P. Morgen of most recent 200 days. the prediction accuracy decreases when price nears 120, stops after 120, and picks up again.</p>
</blockquote>
<p>A closer look a prediction result:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">print(y_pred[<span class="number">-125</span>:<span class="number">-110</span>,:])</span><br><span class="line">[[<span class="number">118.594986</span> <span class="number">120.296196</span> <span class="number">118.37011</span>  <span class="number">119.362076</span>]</span><br><span class="line"> [<span class="number">118.92082</span>  <span class="number">120.646355</span> <span class="number">118.720116</span> <span class="number">119.714264</span>]</span><br><span class="line"> [<span class="number">119.21562</span>  <span class="number">120.96588</span>  <span class="number">119.03798</span>  <span class="number">120.034744</span>]</span><br><span class="line"> [<span class="number">119.438065</span> <span class="number">121.209656</span> <span class="number">119.27927</span>  <span class="number">120.27842</span> ]</span><br><span class="line"> [<span class="number">119.61156</span>  <span class="number">121.401344</span> <span class="number">119.468</span>    <span class="number">120.46955</span> ]</span><br><span class="line"> [<span class="number">119.74968</span>  <span class="number">121.55503</span>  <span class="number">119.618164</span> <span class="number">120.62227</span> ]</span><br><span class="line"> [<span class="number">119.86223</span>  <span class="number">121.680786</span> <span class="number">119.73938</span>  <span class="number">120.74647</span> ]</span><br><span class="line"> [<span class="number">119.9632</span>   <span class="number">121.79347</span>  <span class="number">119.84477</span>  <span class="number">120.8563</span>  ]</span><br><span class="line"> [<span class="number">120.07791</span>  <span class="number">121.92008</span>  <span class="number">119.95497</span>  <span class="number">120.975914</span>]</span><br><span class="line"> [<span class="number">120.2704</span>   <span class="number">122.12872</span>  <span class="number">120.11988</span>  <span class="number">121.16532</span> ]</span><br><span class="line"> [<span class="number">120.59798</span>  <span class="number">122.48024</span>  <span class="number">120.384384</span> <span class="number">121.47831</span> ]</span><br><span class="line"> [<span class="number">120.90217</span>  <span class="number">122.803635</span> <span class="number">120.627945</span> <span class="number">121.766914</span>]</span><br><span class="line"> [<span class="number">121.13604</span>  <span class="number">123.03682</span>  <span class="number">120.82533</span>  <span class="number">121.98914</span> ]</span><br><span class="line"> [<span class="number">121.4418</span>   <span class="number">123.30764</span>  <span class="number">121.10597</span>  <span class="number">122.28069</span> ]</span><br><span class="line"> [<span class="number">121.679</span>    <span class="number">123.51221</span>  <span class="number">121.327576</span> <span class="number">122.50713</span> ]</span><br><span class="line"> [<span class="number">121.77057</span>  <span class="number">123.59196</span>  <span class="number">121.413956</span> <span class="number">122.5952</span>  ]</span><br><span class="line"> [<span class="number">121.81259</span>  <span class="number">123.62908</span>  <span class="number">121.45422</span>  <span class="number">122.63607</span> ]</span><br><span class="line"> [<span class="number">121.839066</span> <span class="number">123.65261</span>  <span class="number">121.47986</span>  <span class="number">122.662</span>   ]</span><br><span class="line"> [<span class="number">121.85849</span>  <span class="number">123.669914</span> <span class="number">121.49878</span>  <span class="number">122.6811</span>  ]</span><br><span class="line"> [<span class="number">121.87355</span>  <span class="number">123.683334</span> <span class="number">121.51347</span>  <span class="number">122.695915</span>]</span><br><span class="line"> [<span class="number">121.885666</span> <span class="number">123.69415</span>  <span class="number">121.52532</span>  <span class="number">122.70786</span> ]</span><br><span class="line"> [<span class="number">121.89534</span>  <span class="number">123.70276</span>  <span class="number">121.53476</span>  <span class="number">122.717384</span>]</span><br><span class="line"> [<span class="number">121.903244</span> <span class="number">123.70979</span>  <span class="number">121.54251</span>  <span class="number">122.72517</span> ]</span><br><span class="line"> [<span class="number">121.909775</span> <span class="number">123.71563</span>  <span class="number">121.548935</span> <span class="number">122.73163</span> ]</span><br><span class="line"> [<span class="number">121.91516</span>  <span class="number">123.720474</span> <span class="number">121.55426</span>  <span class="number">122.736984</span>]]</span><br><span class="line"></span><br><span class="line">print(y_pred[<span class="number">-50</span>:<span class="number">-30</span>,:])</span><br><span class="line">[[<span class="number">121.97397</span>  <span class="number">123.77238</span>  <span class="number">121.6122</span>   <span class="number">122.79505</span> ]</span><br><span class="line"> [<span class="number">121.974106</span> <span class="number">123.77251</span>  <span class="number">121.61233</span>  <span class="number">122.795204</span>]</span><br><span class="line"> [<span class="number">121.97473</span>  <span class="number">123.77303</span>  <span class="number">121.6129</span>   <span class="number">122.79578</span> ]</span><br><span class="line"> [<span class="number">121.97554</span>  <span class="number">123.7737</span>   <span class="number">121.61364</span>  <span class="number">122.79653</span> ]</span><br><span class="line"> [<span class="number">121.9775</span>   <span class="number">123.775345</span> <span class="number">121.61543</span>  <span class="number">122.79836</span> ]</span><br><span class="line"> [<span class="number">121.98193</span>  <span class="number">123.77913</span>  <span class="number">121.61937</span>  <span class="number">122.80246</span> ]</span><br><span class="line"> [<span class="number">121.98416</span>  <span class="number">123.78073</span>  <span class="number">121.62105</span>  <span class="number">122.80426</span> ]</span><br><span class="line"> [<span class="number">121.98341</span>  <span class="number">123.779526</span> <span class="number">121.61937</span>  <span class="number">122.80286</span> ]</span><br><span class="line"> [<span class="number">121.97371</span>  <span class="number">123.76968</span>  <span class="number">121.60829</span>  <span class="number">122.79213</span> ]</span><br><span class="line"> [<span class="number">121.87557</span>  <span class="number">123.675064</span> <span class="number">121.50528</span>  <span class="number">122.68991</span> ]</span><br><span class="line"> [<span class="number">114.85866</span>  <span class="number">116.58525</span>  <span class="number">114.249084</span> <span class="number">115.37254</span> ]</span><br><span class="line"> [<span class="number">102.18071</span>  <span class="number">103.6875</span>   <span class="number">100.93708</span>  <span class="number">102.316696</span>]</span><br><span class="line"> [<span class="number">103.84379</span>  <span class="number">105.045616</span> <span class="number">102.54588</span>  <span class="number">103.7781</span>  ]</span><br><span class="line"> [ <span class="number">99.68439</span>  <span class="number">100.732445</span>  <span class="number">98.26677</span>   <span class="number">99.39317</span> ]</span><br><span class="line"> [ <span class="number">95.785934</span>  <span class="number">96.767426</span>  <span class="number">94.37234</span>   <span class="number">95.400276</span>]</span><br><span class="line"> [<span class="number">104.81848</span>  <span class="number">105.789536</span> <span class="number">103.509056</span> <span class="number">104.634575</span>]</span><br><span class="line"> [ <span class="number">93.265015</span>  <span class="number">94.249084</span>  <span class="number">91.780655</span>  <span class="number">92.95141</span> ]</span><br><span class="line"> [ <span class="number">97.01548</span>   <span class="number">97.91057</span>   <span class="number">95.53687</span>   <span class="number">96.73838</span> ]</span><br><span class="line"> [ <span class="number">89.63896</span>   <span class="number">90.62987</span>   <span class="number">88.16635</span>   <span class="number">89.38889</span> ]</span><br><span class="line"> [ <span class="number">86.91128</span>   <span class="number">87.87613</span>   <span class="number">85.50348</span>   <span class="number">86.60942</span> ]]</span><br></pre></td></tr></table></figure>

<p>Although I think it’s possible to get around by factoring the entire <code>x_pred</code> by 1/10, but I do not think that’s the optimal solution since 1.predicting on training set also produces dubious results and 2.factoring does not represent actual market as different price level usually have different volatility. I speculate there’re a couple of possible errors: </p>
<ol>
<li>Overflow of Numpy/Tensorflow: not really likely under float64</li>
<li>Caused by plateau of MSFT during 2019: Why would the model catch this but not the afterward breakthrough.</li>
<li>TF source code error: I tried to look into it but it’s way too hard for me to navigate around at this moment. </li>
</ol>
<p>I’ll retrain the model on other tickers like AMZN or TSLA that are way over 120 dollars and see if they make any difference. But I don’t really like this idea as these tickers are not not typical representation of the entire market. If anyone has any, just please, reach out to me.</p>
<hr>
<h3 id="Sunday-update"><a href="#Sunday-update" class="headerlink" title="Sunday update:"></a>Sunday update:</h3><p><strong>Monday night update: It appears that the model is completely wrong with the market… So it’s not that easy to lay on my bed and have computer do my trade…</strong></p>
<p>So here’s my model prediction on Sunday <del>night</del> morning:</p>
<table>
<thead>
<tr>
<th align="center">Ticker</th>
<th align="center">Direction</th>
<th align="center">Close price</th>
<th align="center">% prediction change*</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Intel</td>
<td align="center">down</td>
<td align="center">53.57</td>
<td align="center">-4.41%</td>
</tr>
<tr>
<td align="center">JP Morgan</td>
<td align="center">up</td>
<td align="center">93.69</td>
<td align="center">-0.01%</td>
</tr>
<tr>
<td align="center">AMD</td>
<td align="center">down</td>
<td align="center">44.08</td>
<td align="center">-7.06%</td>
</tr>
<tr>
<td align="center">Bilibili</td>
<td align="center">down</td>
<td align="center">24.37</td>
<td align="center">-1.48%</td>
</tr>
<tr>
<td align="center">Delta Airline</td>
<td align="center">down</td>
<td align="center">23.02</td>
<td align="center">-2.34%</td>
</tr>
<tr>
<td align="center">Pinduoduo</td>
<td align="center">down</td>
<td align="center">39.77</td>
<td align="center">-7.58%</td>
</tr>
<tr>
<td align="center">Gilead Science</td>
<td align="center">down</td>
<td align="center">73.27</td>
<td align="center">-3.86%</td>
</tr>
<tr>
<td align="center">CVS Health</td>
<td align="center">down</td>
<td align="center">55.84</td>
<td align="center">–3.79%</td>
</tr>
<tr>
<td align="center">Homel Food</td>
<td align="center">down</td>
<td align="center">43.02</td>
<td align="center">-4.42%</td>
</tr>
<tr>
<td align="center">Occidental Petroleum</td>
<td align="center">down</td>
<td align="center">14.81</td>
<td align="center">-1.40%</td>
</tr>
</tbody></table>
<p><em>* Percent change respect to the model prediction of Friday price (since LSTM predicts a chain of results), while direction is with respect of actual price.</em></p>
<p>So based on these results, I shall say that Monday Market would be pretty pessimistic as these tickers are from different industry. However these tickers might not be good representatives considering big market cap companies like Google, Amazon, Costco etc. have prices way beyond $120, which it limited by a “bug” in my model.</p>
<h4 id="Tackle-“Plateau-issue”-by-training-with-Amazon"><a href="#Tackle-“Plateau-issue”-by-training-with-Amazon" class="headerlink" title="Tackle “Plateau issue” by training with Amazon"></a>Tackle “Plateau issue” by training with Amazon</h4><p>I trained the model using amazon as my sample. The first noticeable problem is that the model is much harder to train. I got around 19% loss at 30 epoch (training with mstf was around 2.5), 14.5% at 50 epoch and 11% at 70 epoch. Further training was able to reduce loss to 8.42% at 90 epoch, but the 100th epoch rebounds to 10%, which suggests a likely overshoot and overfit. I should’ve record the loss but too late now… The analysis of “amazon model” is the following:</p>
<blockquote>
<p><img src="/images/lstm-ii/bac.png" alt> Compare the performance of prediction on bac, observe that the model captures the trend every well across 3 different training stages and it performs exceptionally at 70 epoch. But, at 100 epoch, we see extra volatility (well, price of AMZN is too crazy comparing to bank of America).</p>
</blockquote>
<blockquote>
<p><img src="/images/lstm-ii/msft_amzn.png" alt> Now look at performance of prediction on Microsoft , observe plateau is gone (compare to “msft model”).  At 70 epoch, the “amazon model” captures all day-to-day changes accurately. Though they might be good indicators of the market craziness, but I would not consider any of these prediction as usable due to volatility.</p>
</blockquote>
<blockquote>
<p><img src="/images/lstm-ii/plateau.png" alt> The most interesting part is the plateau issue. The plateau is still there except that the height has changed through out training. At 50 epoch, the model plateaus at around 480, at 70, it plateaus around 620, and at 100 epoch, it plateaus at around 800. Note that prediction of the 70-epoch model captures TSLA price every well under 620 dollars while 100-epoch model is just off the target.</p>
</blockquote>
<p>So what I’m trying to say is that the model doesn’t work well if trained with amazon. Even with the best performance at 70 epoch, we’re still seeing unusual volatility, and plateau issue remains resolved.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yihjian.github.io/2020/04/15/Quant-With-LSTM-i/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Yihong Jian">
      <meta itemprop="description" content="CS@UIUC23/MLer/Blogger/Wall Street Gambler/Procrastinator">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jian's Bullshits">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/15/Quant-With-LSTM-i/" class="post-title-link" itemprop="url">Quant-With-LSTM-i</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-04-15 13:35:00 / Modified: 15:10:42" itemprop="dateCreated datePublished" datetime="2020-04-15T13:35:00-05:00">2020-04-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Coding/" itemprop="url" rel="index"><span itemprop="name">Coding</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/04/15/Quant-With-LSTM-i/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/04/15/Quant-With-LSTM-i/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Recently I’m working on a Long Short Term Memory (LSTM) model to predict stock price. I collected ticker price data from Yahoo using yfinance and used Tensorflow with Keras to setup the model. It’s only at very early stage of this project and I haven’t done any tuning yet, but I came up with some rather intriguing results and some of them doesn’t make sense at all. So code is cheap, show me the talk:</p>
<h5 id="Retrieve-Data"><a href="#Retrieve-Data" class="headerlink" title="Retrieve Data:"></a>Retrieve Data:</h5><p>Considering that tech companys and traditional consumer business have some slight difference in terms of technical analysis, I was going to put all avaible historical data of SP500 tickers into my model. But, as a prototype, I only used the data for Microsoft:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">msft = yf.download(tickers = <span class="string">"msft"</span>)</span><br><span class="line">mstf = msft.dropna()</span><br><span class="line">msft = msft.drop(columns=[<span class="string">"Adj Close"</span>, <span class="string">"Volume"</span>])</span><br><span class="line">data = np.array(msft[[<span class="string">"Open"</span>, <span class="string">"High"</span>, <span class="string">"Low"</span>, <span class="string">"Close"</span>]])</span><br></pre></td></tr></table></figure>

<p>After keeping “open, high, low, and close”, we arranged data from approximating 8600 trading days into an array of shape (8592, 4). The reason why is that technical anaylsis rely on reading the candle chart, therefore training on just closed price would not create a realiable quant model. Idealy, it would be better if the data is cleaned up for dividens, but it shouldn’t make a significant difference. Also, I inteneded to include volume initially as it’s also an indicator for techinical analysis, but it would likely  to overflow the model and normalizing would be hard considering splits or increasing issues.</p>
<h5 id="Clean-Up"><a href="#Clean-Up" class="headerlink" title="Clean Up:"></a>Clean Up:</h5><p>So after downloading data, I used 60 days as the sliding window for recurrence. To clarify, the first pair consits of data from [0, 59] as training, and day 60 as label. The second has training data of day [1, 60] and label of day 61. Then henceforth.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">x_train = []</span><br><span class="line">y_train = []</span><br><span class="line">timestamp = <span class="number">60</span></span><br><span class="line">length = len(data)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(timestamp, length):</span><br><span class="line">    x_train.append(data[i-timestamp:i, :])</span><br><span class="line">    y_train.append(data[i, :])</span><br><span class="line">    </span><br><span class="line">x_train = np.array(x_train)</span><br><span class="line">y_train = np.array(y_train)</span><br></pre></td></tr></table></figure>

<p>The result after cleaning is total of 8532 training units, which is rather small, another reason that I’d like to use all tickers of the S&amp;P500.</p>
<h5 id="Model"><a href="#Model" class="headerlink" title="Model:"></a>Model:</h5><p>So after obtaining training data, I defined my model structure. It consist of four layer of LSTM recurrence layer, and one dense at the end:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">_________________________________________________________________</span><br><span class="line">Layer (type)                 Output Shape              Param #   </span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">lstm_23 (LSTM)               (None, 60, 256)           267264    </span><br><span class="line">_________________________________________________________________</span><br><span class="line">lstm_24 (LSTM)               (None, 60, 512)           1574912   </span><br><span class="line">_________________________________________________________________</span><br><span class="line">lstm_25 (LSTM)               (None, 60, 512)           2099200   </span><br><span class="line">_________________________________________________________________</span><br><span class="line">lstm_26 (LSTM)               (None, 256)               787456    </span><br><span class="line">_________________________________________________________________</span><br><span class="line">dense_6 (Dense)              (None, 4)                 1028      </span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">Total params: 4,729,860</span><br><span class="line">Trainable params: 4,729,860</span><br><span class="line">Non-trainable params: 0</span><br></pre></td></tr></table></figure>

<p>I used all <em>default hyperparameters</em>, expect that I specified optimizer as “adam” and used “absolute percent error” as the loss function–the stock price ranges from couple cents to hundreds of dollars, so we care about is percent change. Against the costume of running recurrent neuron network, I did not inclue any dropout in my model. I tried two version, keeping everything the same except dropout/no-dropout, and found the no dropout actually create better price prediction.</p>
<p>Then I trained it 30 epoch with 32 as batch size, reducing the lost to around 2.5%. It took less than ten minutes with an RTX2060s–I mean it’s a small model with small data anyway.</p>
<p><strong>Evaluation</strong>:</p>
<p>Then I tried predicting on other stock data and here comes the interesting part. For all validation data, I treated it exactly the same as training data:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">intc = yf.download(tickers = <span class="string">"intc"</span>)</span><br><span class="line">intc = intc.dropna()</span><br><span class="line">intc = intc.drop(columns=[<span class="string">"Adj Close"</span>, <span class="string">"Volume"</span>])</span><br><span class="line"></span><br><span class="line">val_data = np.array(intc[[<span class="string">"Open"</span>, <span class="string">"High"</span>, <span class="string">"Low"</span>, <span class="string">"Close"</span>]])</span><br><span class="line">print(val_data.shape)</span><br><span class="line"></span><br><span class="line">x_val = []</span><br><span class="line">timestamp = <span class="number">60</span></span><br><span class="line">length = len(val_data)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(timestamp, length):</span><br><span class="line">    x_val.append(val_data[i-timestamp:i, :])</span><br><span class="line"></span><br><span class="line">x_val = np.array(x_val)</span><br></pre></td></tr></table></figure>

<p>When evaluating different ticker, I just change “intc” to “appl”, “bac” ect. Here’re some interesting results:</p>
<blockquote>
<p><img src="/images/lstm-i/intc.png" alt> The first stock I tried was intel. I plotted the closed price of my model prediction in green, and actual price in red. It can be easily observed that the model prediciton captured almost all fluctuations in the recent “monkey market”–which is surprising as I haven’t done any tuning and it’s only based of <em>one ticker</em>. And I don’t see the likelyhood of overfitting as the model never saw intel price data before. The x-axis is about most recent 100 trading days.</p>
</blockquote>
<blockquote>
<p><img src="/images/lstm-i/bac.png" alt> Similarly the model also predict Bank of America pretty acurratly.</p>
</blockquote>
<blockquote>
<p><img src="/images/lstm-i/ccl.png" alt> Also ccl fits pretty well (How crazy did it moved recently!)</p>
</blockquote>
<blockquote>
<p><img src="/images/lstm-i/lk.png" alt> Even luckin coffee, except the crazy sell-off after the financial problem.</p>
</blockquote>
<h5 id="Problem"><a href="#Problem" class="headerlink" title="Problem:"></a>Problem:</h5><p>Seeing the last section, you may say, great, what’s the problem? </p>
<p>The first is that this performence doesn’t really make sense to me. The training data came from only one ticker and it fits pretty well to other tickers in such a short traning time. One possible validation is running a different time interval (e.g. hour chart) since the theory of technical analysis applies through all time intervals. Another good validation would be running a bunch of predictions for tomorrow: that would work, just append the last 60 days of data into <code>x_val</code>. But there come the other problems:</p>
<p>The second is that the model doesn’t care about intraday fluctuations. Even though the close price prediction seems promising, but actually digging into the predicted data tells a different story:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[[52.58807  53.006332 52.079365 52.606342]</span><br><span class="line"> [50.649292 51.084167 50.1335   50.639133]</span><br><span class="line"> [52.35407  52.78058  51.84988  52.354694]</span><br><span class="line"> [52.34229  52.763435 51.82691  52.352676]</span><br><span class="line"> [57.822975 58.231274 57.346855 57.867443]</span><br><span class="line"> [58.394894 58.807693 57.91325  58.456905]</span><br><span class="line"> [58.013275 58.439564 57.536503 58.05953 ]</span><br><span class="line"> [56.24209  56.678978 55.754234 56.268303]</span><br><span class="line"> [56.630985 57.066933 56.14414  56.65341 ]</span><br><span class="line"> [59.040394 59.46942  58.568333 59.08561 ]]</span><br></pre></td></tr></table></figure>

<p>It’s obvious that column 0 (open price) and cloumn 1 (close price) are very similar–that is against reality and actual data. The third issue is that the model would sometimes give up:</p>
<blockquote>
<p><img src="/images/lstm-i/nvda.png" alt> I apologize for the Chinese label as I was discussing with friends about this yesterday. But it’s pretty clear that initially the model fits pretty weel, but at some point, it just give up and I have no idea why. Maybe it requires an examination for the evaluation data. Note that this chart plots almost 6000 trading days.</p>
</blockquote>
<blockquote>
<p><img src="/images/lstm-i/aapl.png" alt> Sometimes it would give up and pick up again.</p>
</blockquote>
<p>As I’ve never systematically learnt recurrent model before, I’m kind of stuck with how to analysis and tackle these issues. If you have any ideas/suggests/discussions, feel free to reach me out.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yihjian.github.io/2020/04/14/cu-or-not-cu/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Yihong Jian">
      <meta itemprop="description" content="CS@UIUC23/MLer/Blogger/Wall Street Gambler/Procrastinator">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jian's Bullshits">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/14/cu-or-not-cu/" class="post-title-link" itemprop="url">CU or Not CU</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-04-14 17:37:21 / Modified: 20:08:07" itemprop="dateCreated datePublished" datetime="2020-04-14T17:37:21-05:00">2020-04-14</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Thoughts/" itemprop="url" rel="index"><span itemprop="name">Thoughts</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/04/14/cu-or-not-cu/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/04/14/cu-or-not-cu/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>From two weeks ago, I’ve been heavily involved in the preparation of the new Illinois Chinese Student Organization (ICSO). So didn’t do any update on my website last week–which is somewhat slower than my desire updating frequency. <del>Writing something once a week shouldn’t be hard.</del></p>
<p>One of the most heavily debated questions was whether we should join the NPO Chinese Union (CU). We’ve engaged in conversation with them and discussing the consequences and benefits in meetings. I observed a rather intriguing phenomenon: there is a clear divide between “tech people” and “business people.” On one side, my team, the developers (gosh I’m calling myself a developer) consists of engineering students who lean toward staying independent. On the other side, the administrative team, majorly business students, favored becoming an affiliate member.</p>
<p>The reason I know not. Perhaps it is just how two groups work. Like what <em>Coders</em> said, geeks have eagle to tackle problems alone–when something doesn’t work, hack it out. And this was precisely how many great software came into being. The business people, however, they need connections and friends to spread their ideas and get money.</p>
<p>Anyway, it’s just some more nonsense, and for the next passage, I shall be talking about some tech stuff…which was the original intension for this website. Also, I’ll find some time to enable the commenting function.</p>
<p>Apr 14</p>
<hr>
<p>最近两周一直在忙伊利诺伊华人组织（ICSO）的筹备事情，所以一直没有跟新网站。<del>以后还是尽量周更。</del></p>
<p>最近ICSO一直在讨论的问题就是要不要加入CU，和加入他们带来的后果与好处。在过程中，我发现了一个非常有趣的现象。我团队里的技术人员<del>（不要脸）</del>都一边倒的倾向于保持独立，而管理团队的商学院学生都偏向于加入。我也思考了一下这个现象的原因—也许就是极客和管理人的思维方式吧。就像<em>Coders</em>书里说的那样，程序员都有自己搞定一切的野心，啥东西不灵就自己写个码干他。然而商务人士就不同了，他们需要广泛的人脉和朋友圈来背书。</p>
<p>啊又是一篇瞎扯文章。接下来还是写技术项的东西吧。。。毕竟那才是网站的本意。。。然后估计升级一下NexT来搞搞评论区。</p>
<p>4月14日。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yihjian.github.io/2020/04/06/Apr-6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Yihong Jian">
      <meta itemprop="description" content="CS@UIUC23/MLer/Blogger/Wall Street Gambler/Procrastinator">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jian's Bullshits">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/06/Apr-6/" class="post-title-link" itemprop="url">Anxiety</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-04-06 17:55:33 / Modified: 19:07:14" itemprop="dateCreated datePublished" datetime="2020-04-06T17:55:33-05:00">2020-04-06</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Thoughts/" itemprop="url" rel="index"><span itemprop="name">Thoughts</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/04/06/Apr-6/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/04/06/Apr-6/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Recently I have found it harder and harder to grasp materials from a book or from a passage. I can’t skim through four, five pages before I pick up my phone or grab tea again. It feels like something is preventing me from doing, well, basically everything. Normally, a cup of pistachios or a couple hours of intense programming would calm me down. but, it’s becoming hard to concentrate through lines of codes. I feel like I should analyze the situation, but I have no clue regarding where this agony came from.</p>
<p>Maybe it came from the chaotic outside. Since the outbreak of the epidemic, everyone, from my grandma to the stock market, is going crazy; I mean, how often do you see Dow moving down 10 percent one day than up 10 percent the next? It’s just hard to ignore this outburst of information and focus on my inner self, especially when the reality is mixed with rumor and intentional emotional stirrings. Sometimes I have to dig up the entire Google news feed to make sure that I’m not contaminated by fake news. Worst of all is the uncertainty, NOTHING is guaranteed even for tomorrow, except the due date for CS126. None of the summer programs and intern applications replied anything useful, not even my academic advisor who supposed to have the major assignment sent out last week. Well, it’s kind of understandable, who knows if Trump will be blaming China in intensive care tomorrow.</p>
<p>Maybe it came from my self. Since the shelter-in-place order started, I’ve been talking to a lot of people, and they pulled me into their groups. I rejected none of them, resulting in a sudden increase of errands and unsettled things equal anxiety, period. Not saying that I regret doing this cause their ambitions were tantalizing, and it has been my eager to, well, “make breaking news.” (Though none of my personal projects hasn’t gone any further than a initial git repo) Yet, It’s probably the time to pause for a while and think through. Well, what do I want and how should I get it? It’s a philosophical question that daunts me probably since late Junior year in high school, and, frankly, I have no answer to it. For sure, coding and trading are fun, but, apparently, one finds everything stupid after being trapped in a room for a couple of weeks. </p>
<p>Enough whining and time to return to reading <em>I Will Bear Witness</em>. Gosh why are we still reading such a depressing book as homework. Thanks for bearing with my terrible English–it’s most likely the first time I ever write something other than academic papers in English. Ironically, or, I shall say pathetically, what flows out of me is English instead of Chinese when I tried to jiggle something. Apparently, despite shitting on WeChat all day and surfing Chinese social media, I’m handicapped in writing fluent Chinese after years of U.S. education. Hopefully, I would find some back in a couple of posts.</p>
<p>6th Apr, 2020. </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yihjian.github.io/2020/04/03/Thoughts-On-Airliner-and-Cruiser-Stock/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Yihong Jian">
      <meta itemprop="description" content="CS@UIUC23/MLer/Blogger/Wall Street Gambler/Procrastinator">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jian's Bullshits">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/03/Thoughts-On-Airliner-and-Cruiser-Stock/" class="post-title-link" itemprop="url">Thoughts On Airliner and Cruiser Stock</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-04-03 13:01:02" itemprop="dateCreated datePublished" datetime="2020-04-03T13:01:02-05:00">2020-04-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-04-06 18:38:15" itemprop="dateModified" datetime="2020-04-06T18:38:15-05:00">2020-04-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Investment/" itemprop="url" rel="index"><span itemprop="name">Investment</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/04/03/Thoughts-On-Airliner-and-Cruiser-Stock/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/04/03/Thoughts-On-Airliner-and-Cruiser-Stock/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Update Apr 6th:</p>
<p>今天邮轮股和消费股，CCL和FL为代表，基本印证了我的分析，我也建仓了CCL，今天浮盈$1左右。航空股今天明显很弱，但是明显减速了，筑底的可能性依然很大，保持观察。有空的话估计会更新一下关于大盘的看法。</p>
<hr>
<p>Update Apr 5th:</p>
<p>周末很都在讨论老巴抛售航空股的问题，我也稍微更新一下吧。</p>
<p><strong>首先为什么老巴会抛售股票？</strong>主流的声音有两种，一个是说要把股份控制在10%以避开sec汇报的要求，来抄底的时候可以<del>鬼子进村，打枪的不要</del>。 另一个声音是通过分析财务报告，来说明因为基本面产生了变化，导致巴菲特认为航空股不再拥有投资的价值。我不认为我能比网上的价投人分析得更好，就不瞎逼逼了。在雪球/youtube上都有比较详细的分析。</p>
<p><strong>对我的观点是否有影响？</strong>首先我是k线图操盘手，宏观面上的改变不会给我的判断带来直接影响，但是可能会通过反映在股价上来改变我的建仓逻辑。周五提到的是需要股价拉起+macd小绿柱放大才能确定顶部结构。巴菲特的抛售会拉低股价（周五盘后的抛售），那就意味着这个底背离可能需要更长的时间形成，或者干脆直接砸穿。不管是这两种可能性中的哪一个，接下来的3-5个工作日都是重点关注的时间。总结就是说，k线图会告诉我应不应该建仓。</p>
<p>p.s. 很多零售股票的走势也很类似，比如FL，M。尤其是梅西百货的底背离已经完整，但是他的财报一直不怎么样，所以持谨慎态度。</p>
<hr>
<p>今天盯盘的的时候注意到一些票子都快出现技术面上的底部了，那就把我对他们的想法作为第一篇投资笔记吧。因为一直关注的是CCL，DAL和AAL，所以这篇文章也会用这几只票子做主体。鉴于同类型的股票近期走势都很类似，这三只的图形可以窥见行业其他股票的走势。</p>
<p>Due to timing issues, I will probably work on an English version later.</p>
<h4 id="1-回测："><a href="#1-回测：" class="headerlink" title="1. 回测："></a>1. 回测：</h4><p>首先回看一下他们之前的k线图结构。因为我第一次入场是A股，所以把k线图改成了<em>绿跌红涨</em>，这里说明一下。</p>
<h5 id="首先是CCL："><a href="#首先是CCL：" class="headerlink" title="首先是CCL："></a>首先是CCL：</h5><p>可以很明显的看出在19年12月到20年1月底走了一个非常标准的M双头，并且macd出现了顶部背离。再看长线的周线图，有一个很长的下降趋势线，并且在20年2月最后一次突破失败之后股价就开始跳水。</p>
<blockquote>
<p><img src="/images/ccl_top.png" alt> 这是一张12月到1月的日线图，明显的看到双头做平，颈线有对称的跳空。</p>
</blockquote>
<blockquote>
<p><img src="/images/ccl_week.png" alt> 这是CCL的周线图，在多次突破失败后狂泻。</p>
</blockquote>
<h5 id="然后看DAL："><a href="#然后看DAL：" class="headerlink" title="然后看DAL："></a>然后看DAL：</h5><p>相似于CCL，也是一个教科书级别的头部反转模式-头肩顶。</p>
<blockquote>
<p><img src="/images/dal_head.png" alt> 这只老巴抄在半山腰上的股票在暴跌之前也是有一定迹象的，可以看到明显的左肩和右肩对齐，而且突破颈线是强突破的跳空+长阴线。</p>
</blockquote>
<h5 id="最后看AAL："><a href="#最后看AAL：" class="headerlink" title="最后看AAL："></a>最后看AAL：</h5><p>和CCL/DAL不同的是，AAL走出了一个长下降趋势通道的下突破。</p>
<blockquote>
<p><img src="/images/aal_channel.png" alt> 这是一张AAL的周线图，可以看出3月的第一周出现了明显的趋势通道向下突破。这是一个很不利的信号。本来下降通道就是股票上期下跌，向下突破说明市场更加没有信心。</p>
</blockquote>
<p>小结一下，也就是说刨去疫情对欧美的影响，在1月下旬和2月，这几只股票在一月下旬/二月上旬都已经出现在顶部反转/加速下跌的迹象。个人认为这个技术面的因素于基本面共振加速，也加剧了跌势，也就为这几天潜在的抄底带来了机会。</p>
<h4 id="2-近期结构："><a href="#2-近期结构：" class="headerlink" title="2. 近期结构："></a>2. 近期结构：</h4><p>近期（尤其是今天）在这些股票出现了，或者很可能出现底部结构。也就是说，个人的判断他们的底部已经靠近了。从二月中旬三月初一直观望等待的抄底机会马上来了。</p>
<h5 id="依然第一个看CCL："><a href="#依然第一个看CCL：" class="headerlink" title="依然第一个看CCL："></a>依然第一个看CCL：</h5><p>邮轮在tank了这么就之后，昨天+今天已经筑好W形双底的根基，并且有一个底部背离。一旦向上拉起这个底部结构就可以完全确认。而这个结构相对应的是1月的双头，向上拉起的第一个目标是找颈线，也就是约$17的位置。也就是说这是一个潜在的100%的利润。</p>
<blockquote>
<p><img src="/images/CCL_buttom.png" alt> 我把背离和底部的位置都标出来了。只要黄色圈中macd小绿柱拉长并且股价拉起，这就是一个底部的买点。</p>
</blockquote>
<p>当然值得注意的是最近的$8增发问题。要观察一下这个增发是不是导致股价在8美元上下浮动的原因，应该在4月6日可以确定。</p>
<h5 id="然后看DAL：-1"><a href="#然后看DAL：-1" class="headerlink" title="然后看DAL："></a>然后看DAL：</h5><p>结构没有很标准，如果按照收盘价看依然是一个双底，但是没有新低所以不是背离。希望他能在砸一下拉低我的进场成本hhh。第一目标依然是35块的颈线。</p>
<blockquote>
<p><img src="/images/dal_bot.png" alt> 概念和CCL很相似，依然是需要小绿柱向上增长+股价拉起才进场。</p>
</blockquote>
<h5 id="最后看AAL：-1"><a href="#最后看AAL：-1" class="headerlink" title="最后看AAL："></a>最后看AAL：</h5><p>AAL是最难看的，双底没能做平，跌穿了。而且今天是加速下跌的，所以可能是机会最差的。</p>
<blockquote>
<p><img src="/images/aal_bot.png" alt>可以看到虽然有背离，但是因为今天（4月3号）拉了一根长阴线，所以需要更长时间减速并且拉起。应该要等一等再进场。</p>
</blockquote>
<h4 id="3-基本面"><a href="#3-基本面" class="headerlink" title="3.基本面"></a>3.基本面</h4><p>!TODO</p>
<p>一般来说技术派不看基本面，但是考虑到大环境这么差，还是留意一下吧。大概念是航空是刚需，邮轮不可能倒闭，所以一定会有机会。挖个坑，看看要不要补财务分析。</p>
<h4 id="4-操作逻辑"><a href="#4-操作逻辑" class="headerlink" title="4. 操作逻辑"></a>4. 操作逻辑</h4><p>目前的打算是配置10%-15%左右的资产进去邮轮/航空。比例为航空：邮轮=2：1。逻辑是航空业是刚需，恢复一定比作为选择性消费的邮轮快。考虑到大环境不好，股指在技术面上很难看（挖坑2），会偏向于<strong>中短线</strong>，见好就收并且<strong>严格执行止损</strong>。</p>
<hr>
<p>注：不构成任何投资意见。仅作为自己的想法/投资笔记。股市有风险，入市需谨慎。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Yihong Jian"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Yihong Jian</p>
  <div class="site-description" itemprop="description">CS@UIUC23/MLer/Blogger/Wall Street Gambler/Procrastinator</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">6</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/yihjian" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;yihjian" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:jianyh1@hotmail.com" title="E-Mail → mailto:jianyh1@hotmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.linkedin.com/in/yihong-jian-b66461133/" title="Linked-In → https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;yihong-jian-b66461133&#x2F;" rel="noopener" target="_blank"><i class="fab fa-linkedin fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/images/wechat.jpg" title="WeChat → &#x2F;images&#x2F;wechat.jpg"><i class="fab fa-weixin fa-fw"></i></a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fas fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yihong Jian</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://yihjian-github-io.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>

</body>
</html>
